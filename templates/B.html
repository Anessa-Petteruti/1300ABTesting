<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript">
        var timerStart = Date.now();
        console.log('Page Load:' + timerStart)
        var uniq_session = timerStart;

        var cookie = getCookie('uid');
        var uniq_session = cookie;

        if(cookie == '' || cookie == null) {
          var uid = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 12);
          console.log('uid:' + uid)
          setCookie('uid', uid,  40)
          cookie = getCookie('uid');
          uniq_session = cookie;
        }
        function setCookie(cname, cvalue, exdays) {
          var d = new Date();
          d.setTime(d.getTime() + (exdays*24*60*60*1000));
          var expires = "expires="+ d.toUTCString();
          document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
          var name = cname + "=";
          var decodedCookie = decodeURIComponent(document.cookie);
          var ca = decodedCookie.split(';');
          for(var i = 0; i <ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') {
                  c = c.substring(1);
              }
              if (c.indexOf(name) == 0) {
                  return c.substring(name.length, c.length);
              }
          }
          return "";
        }

        console.log('version B: cookie:' + cookie)

        function openMenu() {
            document.getElementById("main").style.marginLeft = "300px";
            document.getElementById("sideMenu").style.width = "300px";
            document.getElementById("hamburger").style.display = "none";
            
          }

          function closeMenu() {
            document.getElementById("main").style.marginLeft= "0";
            document.getElementById("sideMenu").style.width = "0";
            document.getElementById("hamburger").style.display = "block";
            
          }

    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="../static/B.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Julius Sans One' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Poiret One' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Darker Grotesque' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Red Hat Display' rel='stylesheet'>

    <title>Find Memphis Taxis online</title>
  </head>

  <body>

    <div id="sideMenu" class="menu">
      <img class="closeIcon" src='../static/cross-out.png' onclick="closeMenu()"/>
      <div class="menuIconContainer"><a><img class="menuIcon" src='../static/locator.png'/>Taxi Locator</a></div>
      <div class="menuIconContainer"><a><img class="menuIcon" src='../static/tour.png'/>Tour Memphis</a></div>
      <div class="menuIconContainer"><a><img class="menuIcon" src='../static/resources.png'/>Resources</a></div>
      <div class="menuIconContainer"><a><img class="menuIcon" src='../static/about.png'/>About</a></div>
      <div class="menuIconContainer"><a><img class="menuIcon" src='../static/help.png'/>Help</a></div>
    </div>

    <div id="main">

      <div class="rowHeader">
      <img src="../static/menu-bar.png" onclick="openMenu()" class="menuBar" id="hamburger">
      <div class="titleHeader">
        <div class="centerTitle">Memphis Taxis</div>
        <img src="../static/taxi.png" class="car">
      </div>
      <div class="rightHeader">
        <div class="rightMenuBar">
          
        </div>
      </div>
    </div>
    
    <div class="all-entries">

    <div class="vendor-wrapper">
      <div class="textButtonWrapper">
        <div class="title">Home of Blues Services</div>
        <div class="description">Safe, Reliable Taxi Services from Yellow Cab and Checker Cab are available
              in the Memphis Metro area 24 hours a day.</div>
        <button class="vendor-book-button" type="submit" id="mp1">Book</button>
      </div>
      <div class="imageDiv">
        <img src="../static/memphis.png" class="vendor-photo" />
      </div>
    </div>

    <div class="vendor-wrapper">
      <div class="textButtonWrapper">
        <div class="title">Theater Taxi</div>
        <div class="description">Our drivers are the most professional drivers in the industry. Our drivers
              are licensed and required to successfully complete a formal training.</div>
        <button class="vendor-book-button" type="submit" id="mp2">Book</button>
      </div>
      <div class="imageDiv">
        <img src="../static/memphis2.png" class="vendor-photo" />
      </div>
    </div>

    <div class="vendor-wrapper">
      <div class="textButtonWrapper">
        <div class="title">Memphis Uber</div>
        <div class="description">We are so much cheaper than taxis..! Call us for transportation to your next destination!</div>
        <button class="vendor-book-button" type="submit" id="mp3">Book</button>
      </div>
      <div class="imageDiv">
        <img src="../static/uber.png" class="vendor-photo" />
      </div>
    </div>

    <div class="vendor-wrapper">
      <div class="textButtonWrapper">
        <div class="title">Premier Taxis</div>
        <div class="description">Our goal is to efficiently
              transport our passengers in a safe, polite and timely manner at a fair
              price.</div>
        <button class="vendor-book-button" type="submit" id="mp4">Book</button>
      </div>
      <div class="imageDiv">
        <img src="../static/premiere.png" class="vendor-photo" />
      </div>
    </div>

  </div>
  </div>


    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script>
        var timeLoaded = Date.now()
          $(document).ready(function() {
            timeLoaded =  Date.now();
            console.log('Page Load:' + timeLoaded)
            sendData(timeLoaded, 0.0, 0.0, uniq_session)
          });

        $("#mp1").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp1'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "http://www.yellowcabofmemphis.com/"
        })


        $("#mp2").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp2'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "https://www.ridecharge.com/s/tn-memphis/taxi-sedan-limo-shuttle"
        })

          $("#mp3").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp3'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "https://www.uber.com/cities/memphis/"
        })

            $("#mp4").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp4'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "https://premierofmemphis.com/contact-us/"
        })


        function sendData(timeLoaded, clickTime, clickObjectID, cook){
              var dataObj = { 'version': 'B', 'pageLoadTime': timeLoaded , 'clickTime': clickTime , 'HtmlElementID': clickObjectID, 'UniqueSession' :uniq_session};
              console.log(JSON.stringify(dataObj))
               $.ajax({
                   type: 'POST',
                    url: '/data',
                    async: false,
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(dataObj),
                    success: function(callback) {
                        console.log(callback);
                    },
                    error: function() {
                        $(this).html("error!");
                    }
              });
        }
     </script>
  </body>
</html>
